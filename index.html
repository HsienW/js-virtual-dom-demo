<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Virtual Dom Simulation</title>
</head>
<body>
<script>

    // let element = {
    //     tagName: 'ul',  //節點標籤名
    //     props: {  // DOM 的屬性，用一個對象存儲鍵值對
    //         id: 'list'
    //     },
    //     children: [  //該節點的子節點
    //         {tagName: 'li', props: {class: 'item'}, children: ["Item 1"]},
    //         {tagName: 'li', props: {class: 'item'}, children: ["Item 2"]},
    //         {tagName: 'li', props: {class: 'item'}, children: ["Item 3"]},
    //     ]
    // }

    const Element = function (tagName, props, children) {
        this.tagName = tagName
        this.props = props
        this.children = children
    }

    Element.prototype.render = function () {
        let element = document.createElement(this.tagName) // 依照 tagName 創建
        let props = this.props

        for (let propName in props) { // 設定 DOM 的節點屬性
            let propValue = props[propName]
            element.setAttribute(propName, propValue)
        }

        let children = this.children || []

        children.forEach((child) => {
            let childElement = (child instanceof Element)
                ? child.render() // 如果子節點也是虛擬 DOM，遞迴創建 DOM 結點
                : document.createTextNode(child) // 如果字串，只創建文字結點
            element.appendChild(childElement)
        })

        return element;
    }

    const ulNode = new Element('ul', {id: 'list'}, [
        new Element('li', {class: 'item'}, ['Item 1']),
        new Element('li', {class: 'item'}, ['Item 2']),
        new Element('li', {class: 'item'}, ['Item 3'])
    ]);

    console.log(ulNode);


</script>
</body>
</html>
